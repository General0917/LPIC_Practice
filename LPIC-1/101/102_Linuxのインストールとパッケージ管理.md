### 6-1
- 既存のライブラリのバージョンをアップしたり、新しいディレクトリを作ってその下に新しいライブラリをインストールした場合に実行すべきコマンドは、**ldconfig**である
  - ldconfig
    - 共有ライブラリのバージョンを更新した際に、コンピュータ上で共有ライブラリを最新のバージョンとして認識させるコマンド
    - 共有ライブライ(プログラム)をインストールや、バージョン更新を実行した際にエラーを起こすことがある
      - これは、必要な共有ライブラリがシステムに認識されず発生する場合がある
      - 必要な共有ライブラリをシステムに認識させるには、**/etc/ld.so.conf**に、**/usr/local/lib**を追記し、ルート権限で**ldconfig**を実行する

### 6-2
- 新しいライブラリmytool.soをインストールしてldconfigコマンドを実行したが、アプリケーションのライブラ 
リを見つけることができなかった。原因として適切なものは、**/etc/ld.so.confにライブラリのパスを追加しなかった**のが原因

### 6-3
- ユーザーが作成したライブラリをダイナミックリンカが参照できるようにするための、ライブラリが置かれたディレクトリを指定あるいは追加する環境変数の名前は、**LD_LIBRARY_PATH**である
  - LD_LIBRARY_PATH
    - Solarisシステムのシェルに対して、クライアントまたは共有のIBM Informix一般ライブラリを検索するディレクトリを指示する環境変数である
    - 使用しているクライアントライブラリを含むディレクトリを指定してから、製品を使用する必要がある
    - exportコマンドにより環境変数を設定可能
  ```
  # 実行例
  export LD_LIBRARY_PATH=/home/user/lib:$LD_LIBRARY_PATH
  ```

### 6-4
- コマンドあるいは共有ライブラリが必要とする全ての共有ライブラリを表示するコマンドは、**ldd**コマンドである
  - ldd
    - 共有ライブラリへの依存関係を表示する
    - 引数のファイル名には、コマンド名を指定する
    - カレントディレクトリにある場合はコマンド名だけでよく、それ以外は絶対パスか相対パスで指定する
  - lddコマンドの構文
    - ldd [オプション] ファイル名

  - 主なオプション
    | オプション | 説明 |
    | ---- | ---- |
    | -d | 足りないオブジェクトについてレポートする |
    | -r | 足りないオブジェクトや関数についてレポートする |
    | -u | 使用されていない依存関係を表示する |
    | -v | 全ての情報を表示する |

### 6-5
- RPMベースのLinuxシステムに新しくプログラムをインストールしたい場合は、**rpmコマンドを使用してrpmパッケージからバイナリ形式のプログラムをインストールする**
  - RPM形式
    - Red Hat LinuxやFedora Linux、CentOS等のRed Hat系ディストリビューションに採用されているパッケージ管理システムである。
    - rpmコマンドやyumコマンドを利用して、rpmパッケージを管理を行う
  - Debian形式
    - Debian GNU/LinuxやUbuntu Linux等のDebian系ディストリビューションで採用されているパッケージ管理システムである。
    - dpkgコマンドやapt-getコマンド、apt-cacheコマンドを利用してdebパッケージの管理を行う

  - 主なパッケージの形式と管理コマンド
    | コマンド | RedHat系 | Ubuntu/Debian系 |
    | ---- | ---- | ---- |
    | パッケージ管理 | rpm形式 | deb形式 |
    | パッケージ管理コマンド | rpmコマンド | dpkgコマンド |
    | リポジトリを利用したパッケージ管理コマンド | yum(dnf)コマンド | apt-cacheコマンド, apt-getコマンド |
  
  パッケージ管理システムを利用することで、ソフトウェアの導入(インストール)や削除(アンインストール)を比較的簡単に行うことができる。<br />
  現在インストールされているソフトウェア情報の調査、ソフトウェア間での依存関係の確認や競合の回避なども容易に行うことができる。

### 6-6
- パッケージファイルの説明として適切なものは、**パッケージファイルにはアーキテクチャを表す文字列が含まれる**と**パッケージファイルには、バイナリの他にライブラリや設定ファイル、マニュアルなども含まれる**などがある
  - RPM形式(cups-1.6.3-35.el7.x86_64.rpm)
    | フィールド | 例 | 説明 |
    | ---- | ---- | ---- |
    | パッケージ名 | cups | パッケージ固有の名前 |
    | バージョン番号 | 1.6.3 | 各バージョンのメジャーバージョン番号 |
    | リリース番号 | 35.e17 | 各バージョンにおけるリリース番号 |
    | アーキテクチャ | x86_64 | どのアーキテクチャ向けのバイナリかを表す。x86_64は64bit環境を表す |
    | 拡張子 | rpm | rpmパッケージであることを表す |

  - Debian形式(cups_2.2.7-1ubuntu2.4_amd64.deb)
    | フィールド | 例 | 説明 |
    | ---- | ---- | ---- |
    | パッケージ名 | cups | パッケージ固有の名前 |
    | バージョン番号 | 2.2.7 | 各バージョンのメジャーバージョン番号 |
    | リビジョン | 1ubuntu2.4 | バージョン番号に基づくUbuntuもしくはDebianパッケージとしてのバージョン(リビジョン) |
    | アーキテクチャ | amd64 | どのアーキテクチャ向けのバイナリかを表す。amd64は64bit環境を表す |
    | 拡張子 | deb | debパッケージであることを表す |

  パッケージ管理システムでは、ソフトウェアをパッケージというファイル単位で管理している。<br />
  パッケージは実行形式に変換したバイナリの他、ライブラリや設定ファイル、マニュアルなどを1つにまとめたものである。<br />
  また、パッケージ管理する上で必要となる依存情報も含まれている。

### 6-7
- パッケージファイルをダウンロードし、インストールする前にパッケージファイルを指定して、そのパッケージが依存するパッケージを表示するコマンドラインとして適切なものは、**rpm -qpR パッケージファイル名**である
  - rpmの主なオプション
    | オプション | 説明 |
    | ---- | ---- |
    | -q(--query) | 指定したパッケージがインストールされていればバージョンを表示 |
    | -a(--all) | インストール済みのパッケージ情報を一覧で表示 |
    | -i(--info) | 指定したパッケージの詳細情報を表示 |
    | -f(--file) | 指定したファイルを含むrpmパッケージを表示 |
    | -c(--configfiles) | 指定したパッケージ内の設定ファイルのみを表示 |
    | -d(--docfiles) | 指定したパッケージ内のドキュメントのみを表示 |
    | -l(--list) | 指定したパッケージに含まれるすべてのファイルを表示 |
    | -K(--checksig) | パッケージの完全性を確認するために指定されたパッケージファイルに含まれるすべてのダイジェスト値と署名をチェック |
    | -R(--requires) | 指定したパッケージが依存しているrpmパッケージを表示 |
    | -P(--package) | インストールされたrpmパッケージではなく、指定したrpmパッケージファイルの情報を表示 |
    | --changelog | パッケージの更新情報を表示 |

  rpmパッケージに関する情報を調査し表示するには「-q(--query)」オプションを使用する。<br />

### 6-8
- rpmコマンドで、インストール済みのパッケージを指定し、そのパッケージに含まれるファイル名をリスト表示するオプションとして適切なものは、**--query --list**である
  - 6-7の問題を参照する

### 6-9
- 設定ファイルのみを表示するrpmコマンドのオプションとして適切なものは、**-qc**である
  - 6-7の問題を参照する

### 6-10
- yumコマンドで、パッケージグループを一覧表示するものとして適切なものは、**yum grouplist**である

  パッケージグループとは、システムツールや特定のアプリケーションなど、共通の目的でサービスを提供するパッケージの集合である。<br />
  パッケージグループにを一覧表示するには、「**yum grouplist**」と指定する。<br />
  また、特定のグループに含まれているパッケージを一覧表示するには「**yum group info パッケージグループ名**」、グループ名を指定してパッケージをインストールを行うには「**yum groupinstall パッケージグループ名**」とする。

### 6-11
- /etc/mke2fs.confファイルを所有するパッケージを表示するオプションとして適切なものは、**-qf**である
  - 6-7の問題を参照する

### 6-12
- パッケージファイルを指定し、そのパッケージがインストールされていない場合は新規にインストールし、旧バージョンが存在する場合は更新したいと考えている。その場合のコマンドラインは、**rpm -U xx-2.0.0.rpm**である。
  - 主なインストール・アップグレードに関するオプション
    | オプション | 説明 |
    | ---- | ---- |
    | -i(--install) | パッケージをインストールする(アップデートは行わない) |
    | -U(--upgrade) | パッケージをアップグレードする。インストール済みのパッケージが存在しない場合は、新規にインストールを行う |
    | -F(--freshen) | パッケージをアップデートする。インストール済みのパッケージが存在しない場合は、何も行わない |
    | -v(--verbose) | 詳細な情報を表示する |
    | -h(--hash) | 進行状況を#記号で表示する |
    | --force | 指定されたパッケージがすでにインストールされていても上書きインストールを行う |
    | --oldpackage | 古いパッケージに置き換えることを許可(ダウングレード)する |
    | --test | パッケージをインストールせず、衝突等のチェックを行い結果を表示する |

  npmパッケージファイルからシステムへのインストールやアップデートを行うには主に上記のオプションを利用する

### 6-13
- 最新バージョンアップしたパッケージを複数ダウンロードした。中には現在システムにインストールされていないパッケージも含まれている。インストールされているパッケージだけをアップデートするコマンドラインとして適切なものは、**rpm -Fvh *.rpm**である
  - 6-12の問題を参照する

### 6-14
- rpmパッケージを削除するコマンドラインとして適切なものは、**rpm -e pkgname**である。
  - アンインストールに関するオプション
    | オプション | 説明 |
    | ---- | ---- |
    | -e(--erase) | パッケージを削除する |
    | --nodeps | 依存関係を無視してパッケージを削除する |
    | --allmatches | パッケージ名に一致するすべてのバージョンのパッケージを削除する |

### 6-15
- ダウンロードしたnpmファイルをインストールする前に作業用ディレクトリに展開し、中のファイルを確認したい場合は、使用するコマンドとして適切なものは、**rpm2cpio**である
  - rpm2cpio
    - rpmファイルをcpioアーカイブ形式に変換し、標準出力に出力する
      - パッケージインストール前に、インストールファイルに問題がないのかを確認することができる

### 6-16
- yumコマンドでインストール済みのパッケージの一覧を表示するオプションは、**list installed**である
  - 主な検索に・表示に関するサブコマンド
    | サブコマンド | 説明 |
    | ---- | ---- |
    | list | 利用可能な全rpmパッケージ情報を表示 |
    | list installed | インストール済みのrpmパッケージを表示 |
    | info | 指定したrpmパッケージの詳細情報を表示 |
    | search | 指定したキーワードでrpmパッケージを検索し結果を表示 |
    | deplist | 指定したrpmパッケージの依存関係を表示 |
    | list updates | インストール済みのrpmパッケージで更新可能なものを表示 |
    | check-update | インストール済みのrpmパッケージで更新可能なものを表示 |

  yumはrpmパッケージを管理するユーティリティである。<br />
  パッケージの依存関係を自動的に解決してインストール、削除、アップデートを行うユーティリティである。<br />
  yumコマンドは、インターネット上のリポジトリ(パッケージを保管・管理している場所)と通信し、<br />
  簡単にrpmパッケージのインストールや最新情報の入手が可能である。

### 6-17
- システムの最新性をチェックするために、アップデートができるすべてのパッケージを表示する際のコマンドラインは、**yum list updates**と**yum check-update**である
  - 6-16の問題を参照する

### 6-18
- yumコマンドでパッケージを削除する際の説明として適切なものは、**特定のパッケージを削除するにはremoveサブコマンドを使用する**と**特定のパッケージを削除するにはeraseサブコマンドを使用する**である
  - パッケージを削除する際に関するサブコマンド
    | サブコマンド | 説明 |
    | ---- | ---- |
    | remove | 依存関係を検証し、不要となるパッケージがある場合は削除する |
    | erase | 依存関係を検証し、不要となるパッケージがある場合は削除する |

  - インストール・アップデートに関するサブコマンド
    | サブコマンド | 説明 |
    | ---- | ---- |
    | install | 指定したrpmパッケージをインストールする。自動的に依存関係も解決する |
    | update | インストール済みのrpmパッケージで更新可能なものをすべてアップデートする。なお、個別のrpmパッケージを指定して更新することも可能 |
    | upgrade | システム全体のリリースバージョンアップを行う |

### 6-19
- yumコマンド実行時に参照されるリポジトリをURLで指定する設定ファイルがある。そのファイルを保存しているディレクトリの名前は、**/etc/yum.repos.d**である
  - yumの設定ファイル
    | ファイル | 説明 |
    | ---- | ---- |
    | /etc/yum.conf | 基本設定ファイル |
    | /etc/yum.repos.dディレクトリ以下に保存されているファイル | リポジトリの設定ファイル |
    
### 6-20
- rpmパッケージのインストールは行わず、rpmファイルのダウンロードだけをする場合に使用するコマンドとして適切なものは、**yumdownloader**である
  - yumdownloader
    - yumやrpmコマンドなどでシステムへパッケージのインストールを行うことが可能だが、個別にrpmファイルをダウンロードする場合、yumdownloaderコマンドを使用すると便利である
    - 一般ユーザー権限でも使用可能であり、「**yumdownloader パッケージ名**」と実行する
    - rpmファイルを保存しておけば、最新のパッケージを使用するのではなく、決められたバージョンでマシンを構築しなければならないなどに便利である

### 6-21
- zypperコマンドで、パッケージを削除するものとして適切なものは、**zypper remove パッケージ名**である
  - zypperコマンドの構文
    - zypper [グローバルオプション] コマンド [コマンドオプション] [パラメータ]

  - zypperの主なコマンド
    | コマンド | 説明 |
    | ---- | ---- |
    | update | パッケージの更新 |
    | search パッケージ名 | パッケージの検索 |
    | install パッケージ名 | パッケージのインストール |
    | remove パッケージ名 | パッケージの削除 |
    | info パッケージ名 | パッケージの情報を調べる |
    | repos | リポジトリの一覧表示 |

  zypperは、Libzyppライブラリを利用したコマンドラインによるパッケージ管理ツールである。<br />
  パッケージのインストール、更新、削除、およびリポジトリの管理が可能である。<br />
  パッケージ管理システムとしてRPM形式を採用しているが、管理ツールはzypperを使用している。

### 6-22
- パッケージファイルであるdebian_pkgに含まれるファイルを全て表示するためのコマンドラインとして適切なものは、**dpkg -L debian_pkg**と**dpkg --listfiles debian_pkg**である
  - 表示に関する主なオプション
    | オプション | 説明 |
    | ---- | ---- |
    | -l(--list) | インストール済みの全debパッケージの情報を表示する。特定のパッケージ情報のみ表示する場合は、-lオプションの後にパッケージ名を指定 |
    | -s(--status) | 指定したパッケージの情報を表示する。依存関係も確認可能 |
    | -L(--listfiles) | 指定したパッケージに含まれるすべてのファイルを表示する |
    | -S(--search) | インストール済みのパッケージから指定されたファイルを検索する |
    | -I(--info) | 指定したパッケージの詳細情報を表示する |
    | -C(--audit) | インストールが完了していないパッケージを検索 |
    | -c(--contents) | インストールされたパッケージではなく、指定したdebパッケージファイルに含まれるファイルの一覧を表示する |

  6-5の解説にある通り、Debian系ディストリビューションで採用されているパッケージ管理システムでは、debパッケージの管理を行う。<br />
  管理者はパッケージファイルを選択し、dpkgコマンドを使用してインストールやアップデート、アンインストールを行う。<br />

### 6-23
- Debianシステムではパッケージのインストール時に多くのファイルが作成されている。そこでインストール済みのパッケージから/etc/sample.confファイルが含まれているパッケージを表示するためにコマンドラインとして適切なものは、**dpkg -S(--search) /etc/sample.conf**である
  - 6-22の問題を参照する

### 6-24
- 何かしらのエラーがあり、部分的にインストールされたパッケージを検索したい場合のコマンドラインとして適切なものは、**dpkg -C(--audit)**である
  - 6-22の問題を参照する

### 6-25
- システムにインストールされているdebパッケージを一覧表示するために使用されているコマンドはとして適切なものは、**dpkg**と**dselect**である
  - dselect
    - パッケージ管理用ユーザインタフェースを起動する
    - メインメニューから利用可能パッケージのバージョンリストの更新や、インストール済み・利用可能パッケージの状況表示などを行うことができる

### 6-26
- debパッケージであるpkgnameを設定ファイルは残してアンインストールするためのコマンドラインとして適切なものは、**dpkg -r pkgname**または、**dpkg --remove pkgname**である。
  - アンインストールに関する主なオプション
    | オプション | 説明 |
    | ---- | ---- |
    | -r(--remove) | パッケージは削除するが、設定ファイルは残したままとする |
    | -P(--purge) | 設定ファイルも含め完全にパッケージを削除する |

  - インストール・アップグレードに関する主なオプション
    | オプション | 説明 |
    | ---- | ---- |
    | -i(--install) | パッケージをインストールする |
    | -E(--skip-same-version) | すでに同じバージョンのパッケージがインストールされている場合は何も行わない |
    | -G(-refuse-downgrade) | すでに新しいバージョンのパッケージがインストールされている場合は何も行わない |

### 6-27
- Debian系のパッケージ管理システムで、インストール済みのパッケージに対してインストール時と同じように設定を行うコマンドは、**dpkg-reconfigure**である
  - dpkg-reconfigure
    - 指定したインストール済みのパッケージに対し設定内容を変更することが可能
    - 例えば、ロケールの変更や、サービスの使用ユーザの制限などがある

### 6-28
- apt-getコマンドを使用して、debian_pkgパッケージをインストールするためのコマンドラインは、**apt-get install debian_pkg**である

  - apt-getの主なサブコマンド(debパッケージのインストール、アップグレード、アンインストールに使用する)
    | サブコマンド | 説明 |
    | ---- | ---- |
    | install | 依存関係をチェックし、パッケージをインストールする |
    | upgrade | アップグレード可能なdebパッケージを全て更新する。現在インストール中のパッケージの削除は行わない |
    | update | パッケージデータベースを更新する |
    | dist-upgrade | 古いパッケージ情報を含め、現在インストールされている全パッケージを更新する | 
    | remove | debパッケージをアンインストールする | 

  - apt-cacheの主なサブコマンド(debパッケージ情報の検索、表示に使用する)
    | サブコマンド | 説明 |
    | ---- | ---- |
    | pkgnames | 全てのdebパッケージを一覧表示 |
    | search | 指定したキーワードを含むパッケージを表示。複数キーワードや正規表現を用いたキーワードの指定が可能 |
    | show | 指定したパッケージの詳細情報と、依存情報を表示 |
    | depends | 指定したパッケージの依存関係と、その依存関係を満たす他のパッケージの一覧を表示 |

  Debian GNU/Linuxにおいて、debパッケージをより効率よく管理するためのツールとしてAPTがある。<br />
  使用する主なコマンドとしてapt-cacheコマンド、apt-getコマンドがあり、パッケージの依存関係を自動的に解決する。<br />
  サブコマンドと組み合わせて使用する。

### 6-29
- dpkgコマンドでパッケージをインストールしようとしたが、依存関係の問題で失敗した。再度、依存関係が欠如しているパッケージも含めて自動的にインストールするコマンドラインとして適切なものは、**apt-get install パッケージ名**である。
  - 6-28の問題を参照する

### 6-30
- Debian系システムで、現在インストールされているパッケージの削除は行わず、可能な限りシステムを最新の状態にアップグレードするコマンドラインは、**apt-get upgrade**である。
  - 6-28の問題を参照

### 6-31
- Debian系のパッケージ管理システムで、パッケージの置かれているネットワーク上の場所を記述するファイルは、**/etc/apt/sources.list**である
  - /etc/apt/sources.list
    - apt-getコマンドで、/etc/apt/sources.listに記述された入手リストに従い、パッケージをインストールしている。
    - 必要に応じてこのファイルにURLを追加することができる

### 6-32
- 仮想マシン(VM)とコンテナ(LXC)の違いを説明していものは、以下である
  - **完全仮想化によるVMは仮想ハードウェアに特定のハードウェアアーキテクチャ用であれば、どのOSを用いても稼働する**
  - **LXCを用いた仮想化ではプロセスの分離やリソースの管理を制御できる**
  - **KVMはエミュレートにより、物理的なハードウェアあるいは仮想化されたハードウェア上に仮想環境を構築するため、ホストOSとゲストOSは同一のOSでなくてよい**
  - **コンテナはホストOSのカーネルを共有するが、独自のストレージ領域、独自のネットワークアドレスを持つ**

  #### 仮想化とは
  - ハードウェア、サーバー、ストレージ、ネットワークなどのコンピュータシステムを構成するリソースを元の構成から独立させて、分割あるいわ統合する形で仮想的に構成する技術である。VMとLXCとは以下の通りである。
    - 仮想マシン(VM)
      - ハイパーバイザーによる仮想化で稼働する仮想環境
    - コンテナ(LXC)
      - Linux Containersの事である。コンテナ仮想環境の一つ

  #### ハイパーバイザーによる仮想化
  - ハイパーバイザーは、その上で仮想マシンを稼働させるソフトウェアである
  - 典型的なパイパーバイザーのタイプには以下の2種類がある
    | タイプ | 説明 |
    | ---- | ---- |
    | ベアメタル型 | ハイパーバイザーが直接ハードウェア上で動作し、全てのOSはそのハイパーバイザー上で動作する方式である。Xenはこの方式 |
    | ホスト型 | ハードウェア上でOS(ホストOS)が動作し、その上でハイパーバイザーが動作する方式である。VMwarePlayerやVirtualBoxはこの方式 |

  #### コンテナ型による仮想化
  - ホストOSと同じカーネルを共有し、OS内で隔離されたコンテナと呼ばれる区画に独自のアドレス空間、ルートディレクトリからなる独自のストレージ領域、独自のネットワークアドレスを持つ
  - ホスト型あるいはハイパーバイザー型による仮想マシンに比べて、サイズが小さく、カーネルの起動/停止や余分なサービスの起動/停止がなく、コンテナの起動/停止が早いのが特徴である

### 6-33
- 仮想マシン(VM)の説明として適切なものは、**既存のVMを基にクローンを作成できる**と**VMにOSをインストールする際、ホストOSが使用するISOファイルと同じものを使用することができる**である
  - クローン(複製)で作成したVMで重複してはいけないもの
    - ホスト名(コンピューター名)
    - IPアドレス(DHCPを使用している場合は、設定不要)
    - マシンID(/etc/machine-idで確認可能)
    - sshホストキー(VM(コンピューター)に接続する際のsshキー)

