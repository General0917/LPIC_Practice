## chapter3

### 3-1
- システムでアクティブなプロセスをすべて表示するコマンドラインは、**ps ax**と**ps -ef**、**pstree**である
  - プロセス
    - 実行中のプログラムのことである
    - 主なプロセスを表示するコマンド
      | 主なコマンド | 説明 |
      | ---- | ---- |
      | ps | プロセスの情報を表示する基本的なコマンド |
      | pstree | プロセスの階層情報を表示する |
      | top | プロセスの情報を周期的にリアルタイムに表示する |

    - 主なオプション
      | 種類 | 主なオプション | 説明 | 
      | ---- | ---- | ---- |
      | UNIX | -e | 全てのプロセスを表示する |
      |  | -f | 詳細情報を表示する | 
      |  | -l | 長いフォーマットで詳細情報を表示する |
      |  | -o | ユーザー定義のフォーマットで表示する |
      | BSD | a | 全てのプロセスを表示する |
      |  | u | 詳細情報を表示する |
      |  | x | 制御端末のないプロセス情報も表示する |

    - psコマンドを使用した際の主な表示項目
      | 主な項目 | 説明 |
      | ---- | ---- |
      | PID | プロセスID |
      | TTY | 制御している端末 |
      | TIME | 実行時間 |
      | CMD | コマンド(実行ファイル名) |

### 3-2
- 現在のシェルで実行中のプロセスの優先度を確認するためのコマンドラインとして、適切なものは、**ps -l**と**top**である
  - プロセスの優先度
    - プロセスの優先度は、**NI(nice)値**で表す

### 3-3
- オプションを指定せずにプロセスをツリー構造で表示するコマンドは、**pstree**である
  - 3-1の問題を参照する
  - pstreeコマンドでの主なオプション
    | オプション | 説明 |
    | ---- | ---- |
    | -h | カレントのプロセスとその先祖プロセスを強調表示 |
    | -H PID | 指定したプロセスとその先祖プロセスを強調表示 |
    | -p | プロセスをIDを付けて表示 |

### 3-4
- initのプロセスIDとして適切なものは、**1**である
  - 基本プロセス(処理)が開始されるときは、数字の**1**から開始される

### 3-5
- プロセスのプライオリティ(優先度)をデフォルトから変更するコマンドは、**nice**である
  - 優先度は、**動的優先度**と**静的優先度**がある
    | 優先度 | 説明 |
    | ---- | ---- |
    | 動的優先度 | 静的優先度とCPU使用時間を基に計算され、CPUを使うほど優先度は低くなる。カーネル内部で100 ~ 139の範囲の値を持つ |
    | 静的優先度 | nice値により一定範囲でユーザーが設定可能。カーネル内部で100 ~ 139の範囲の値を持つ |
    
  - niceコマンドの主なオプション
    | オプション | 説明 |
    | ---- | ---- |
    | -c(--adjustment) 優先度 | 優先度(-20 ~ 19)を指定する |

  - niceの設定仕様
    - nice値は、**-20 ~ 19**の値で変更可能
    - niceコマンドで、オプションで数値を指定しない場合のnice値は**10(0 + 10)**の優先度を付与する

### 3-6
- プロセスのプライオリティ(優先度)を変更する場合、設定可能な最大値は、**19**である
  - 3-5の問題を参照する

### 3-7
- 実行中のプロセスの優先度を変更するコマンドとして適切なものは、**top**と**renice**である
  - reniceコマンドの主なオプション
    | オプション | 説明 |
    | ---- | ---- |
    | -n 優先度 | 優先度(nice値)を指定する |
    | -p プロセスID | 対象のプロセスIDを指定する |
    | -g グループID | 対象プロセスのグループIDを指定する |
    | -u ユーザー | 対象プロセスのユーザーIDまたはユーザー名を指定する |

  - topでの優先度変更方法
    - ➀topコマンドを実行後プロセス情報が表示されたら、キーボードから[r]キーをタイプする
    - ➁画面に「PID to renice:」が表示されるので、変更したいプロセスのPID(プロセスID)を入力し[Enter]を押下する
    - ➂画面に「Renice PID [指定したPID] to value:」が表示されるため、優先度を入力し[Enter]を押下する

### 3-8
- バックグラウンドで動作しているジョブをフォアグラウンドで動かすコマンドとして適切なものは、**fg**である
  - ジョブ
    - コマンドライン1行で実行された処理単位のことである
    - ジョブはシェルごとに管理され、「ジョブID」が振られる
    - 1行のコマンドラインで複数のコマンドが実行された場合でも、その処理全体を1つのジョブとして扱う
    - ジョブの種類は、**フォアグラウンドジョブ**と**バックグラウンドジョブ**の2種類がある
      | ジョブ | 説明 |
      | ---- | ---- |
      | フォアグラウンドジョブ | キーボードと端末情報を占有して対話的な操作をするジョブ。そのジョブが終了するまで端末画面上には次のプロンプトが表示されない。シェルごとに1つのみ |
      | バックグラウンドジョブ | キーボード入力を受け取ることができないジョブ。画面への出力設定によっては抑制される。複数のジョブを同時に実行することが可能。**バックグラウンドでジョブ(コマンド)を実行する際には、コマンドの末尾に「&」を付ける。** |
    - ジョブを制御する主なコマンド
      | コマンド | 説明 |
      | ---- | ---- |
      | jobs | バックグラウンドジョブと一時停止中のジョブを表示 |
      | Ctrl + z | 実行しているジョブを一時停止にする |
      | bg %ジョブID | 指定したジョブをバックグラウンドに移行 |
      | fg %ジョブID | 指定したジョブをフォアグラウンドに移行 |

### 3-9
以下のような実行例がある
```
$ myapp
[1] + 停止 myapp
$
```
- ユーザーからのコマンド入力を可能にしたままで、停止しているmyappを再開させるコマンドラインとして適切なものは、**bg myapp**である
  - 3-8の問題を参照する

### 3-10
- 現在バックグラウンドで走っているジョブをすべて表示するコマンドは、**jobs**である
  - 3-8の問題を参照する

### 3-11
- ログアウトした後もコマンドが終了することなく、バックグラウンドで実行を続けさせるコマンドラインとして適切なものは、**nohup コマンド名 &**である。
  - 