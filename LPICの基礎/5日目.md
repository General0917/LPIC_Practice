# 4日目

## 1 シェル

### 1-1 シェルの役割と基本を知ろう
- シェルはコマンドを実行するインタープリタである
  ```
  # シェルを確認する際にはpsコマンドを使用する
  $ ps
   PID TTY          TIME CMD
    15 pts/1    00:00:00 bash
    69 pts/1    00:00:00 su
    86 pts/1    00:00:00 su
    87 pts/1    00:00:00 bash
   119 pts/1    00:00:00 ps
  ```
  - シェルの種類
    | シェル | 説明 |
    | ---- | ---- |
    | sh(Bourne Shell) | UNIXの標準シェル。機能がシンプル |
    | bash(Bourne Again Shell) | shを拡張して多機能にしたシェル。macOSでも標準 |
    | csh(C shell) | C言語に似たスクリプトを使えるシェル |
    | tcsh | cshを拡張したシェル |
    | ksh(Korn shell) | shを拡張したシェル |
    | zsh | kshにbashやtcshの機能を取り込んだ多機能シェル |
- シェルはコマンド実行時にいくつかのメタキャラクタを展開する
- 標準出力をリダイレクトするとコマンドの出力をファイルで保存できる
  - 標準入出力
    - Linux上で実行されるプログラムには、デフォルトで3つの出入り口が用意されている。以下に3つの出入り口を記載する
      - 標準入力
        - キーボード(入力装置)から入力(コマンド)を受け付ける
      - 標準出力
        - 入力装置で受け取ったプログラム結果を受け付け出力する
      - 標準エラー出力
        - 入力装置で受け取ったプログラムのエラー結果を受け付け出力する
  - リダイレクト(**>**)
    - コマンドの標準出力を端末画面ではなく、任意のファイルに切り替えることが可能(出力結果をファイルに出力する)
      ```
      # リダイレクトの例
      # 以下のコマンドは、日付(date)コマンドの出力を、today.txtに切り替えファイル内に記載する
      $ date > today.txt

      # today.txtファイルの内容
      $ cat today.txt
      Tue Aug  8 08:38:03 AM JST 2023

      # もう一度リダイレクト(もう一度リダイレクトすると、内容が上書きされる)
      $ date > today.txt
      $ cat today.txt
      Tue Aug  8 08:40:00 AM JST 2023

      # 追記リダイレクト
      # 上書きではなく、ファイルの末尾に追記する場合は、「>」の代わりに「>>」を使用する
      $ date >> today
      Tue Aug  8 08:40:00 AM JST 2023
      Tue Aug  8 08:46:53 AM JST 2023

      # 標準エラー出力のリダイレクトの例
      $ ls -l today.txt nofile 2> stderr.txt

      $ cat stderr.txt
      ls: cannot access 'nofile': No such file or directory
      ```
- パイプ(**|**)を使うと他のコマンドの出力を別のコマンドで処理できる
  - パイプは1画面に収まりきらない出力をlessコマンドで表示するときなどによく使用する
    ```
    # historyコマンドの実行結果をlessで表示
    $ history | less
      1  pwd
      2  su - general0917
      3  su -
      4  id
      5  pwd
      6  su
      7  pwd
      8  passwd
      9  sudo -i
      10  su
      11  pwd
      12  ifconfig
      13  ruby -v
      14  exit
      15  ls
      16  date > today.txt
      17  cd LPICの基礎/
      18  cd practice_linux/
    ```
- シェルにとって特別な意味を持つ文字をメタキャラクタという  
  - ファイル名の指定などに利用できる主なメタキャラクタは以下の表のとおり
    | シェル | 説明 |
    | ---- | ---- |
    | * | 0文字以上の任意の文字列 |
    | ? | 任意の1文字 |
    | [] | []内の任意の1文字 |
    | \ | メタキャラクタの打ち消し |
    ```
    # ファイルの一覧を表示
    $ cd LPICの基礎/practice_linux
    $ ls
    1.txt  2.txt  3.txt  4.txt  5.txt  a1.txt  a2.txt  a3.txt  ab.txt  b1.txt  b2.txt  c1.txt  c3.txt  sample_new.txt  sample.txt  stderr.txt  today.txt

    # 「*」と「?」の違い

    # .txtの前が0文字以上のファイルを表示する
    $ ls *.txt 
    1.txt  2.txt  3.txt  4.txt  5.txt  a1.txt  a2.txt  a3.txt  ab.txt  b1.txt  b2.txt  c1.txt  c3.txt  sample_new.txt  sample.txt  stderr.txt  today.txt

    # .txtの前が1文字だけのファイルを表示する
    $ ls ?.txt
    1.txt  2.txt  3.txt  4.txt  5.txt

    # []を使うと、[]内の1文字とマッチする。
    # []を使った場合の例(「a」もしくは「b」で始まる名前のファイルにマッチする)
    $ ls [ab]*.txt
    1.txt  a2.txt  a3.txt  ab.txt  b1.txt  b2.txt

    # []内は「-」を使って範囲を指定することも可能
    # 範囲の指定
    $ ls [3-5].txt
    3.txt  4.txt  5.txt

    # 次の例では、ファイル名に「1」か「3」が含まれるファイルにマッチする
    # ファイル名に「1」か「3」が含まれるファイル
    $ ls *[13]*
    1.txt  3.txt  a1.txt  a3.txt  b1.txt  c1.txt  c3.txt
    ```

### 1-2 シェルの便利な機能